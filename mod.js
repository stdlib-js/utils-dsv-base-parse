// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./mod.d.ts" />
function e(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var i=function e(){if(this instanceof e){var i=[null];i.push.apply(i,arguments);var r=Function.bind.apply(t,i);return new r}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),i}var t=e(Object.freeze({__proto__:null,default:()=>()=>{}})),i="function"==typeof Object.defineProperty?Object.defineProperty:null;var r=Object.defineProperty;function n(e){return"number"==typeof e}function a(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function s(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+a(n):a(n)+e,r&&(e="-"+e)),e}var o=String.prototype.toLowerCase,c=String.prototype.toUpperCase;function p(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!n(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=s(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=s(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===c.call(e.specifier)?c.call(i):o.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function u(e){return"string"==typeof e}var _=Math.abs,h=String.prototype.toLowerCase,l=String.prototype.toUpperCase,d=String.prototype.replace,f=/e\+(\d)$/,g=/e-(\d)$/,w=/^(\d+)$/,v=/^(\d+)e/,m=/\.0$/,b=/\.0*e/,k=/(\..*[^0])0*e/;function y(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!n(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":_(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=d.call(i,k,"$1e"),i=d.call(i,b,"e"),i=d.call(i,m,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=d.call(i,f,"e+0$1"),i=d.call(i,g,"e-0$1"),e.alternate&&(i=d.call(i,w,"$1."),i=d.call(i,v,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===l.call(e.specifier)?l.call(i):h.call(i)}function x(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function S(e,t,i){var r=t-e.length;return r<0?e:e=i?e+x(r):x(r)+e}var E=String.fromCharCode,I=isNaN,q=Array.isArray;function L(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function C(e){var t,i,r,n,a,o,c,_,h;if(!q(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(o="",c=1,_=0;_<e.length;_++)if(u(r=e[_]))o+=r;else{if(t=void 0!==r.precision,!(r=L(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+_+"`. Value: `"+r+"`.");for(r.mapping&&(c=r.mapping),i=r.flags,h=0;h<i.length;h++)switch(n=i.charAt(h)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[c],10),c+=1,I(r.width))throw new TypeError("the argument for * width at position "+c+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[c],10),c+=1,I(r.precision))throw new TypeError("the argument for * precision at position "+c+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[c],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=p(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!I(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=I(a)?String(r.arg):E(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=y(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=s(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=S(r.arg,r.width,r.padRight)),o+=r.arg||"",c+=1}return o}var R=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function V(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function F(e){var t,i,r,n;for(i=[],n=0,r=R.exec(e);r;)(t=e.slice(n,R.lastIndex-r[0].length)).length&&i.push(t),i.push(V(r)),n=R.lastIndex,r=R.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function W(e){return"string"==typeof e}function $(e){var t,i;if(!W(e))throw new TypeError($("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[F(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return C.apply(null,t)}var A,N=Object.prototype,T=N.toString,O=N.__defineGetter__,j=N.__defineSetter__,D=N.__lookupGetter__,P=N.__lookupSetter__;A=function(){try{return i({},"x",{}),!0}catch(e){return!1}}()?r:function(e,t,i){var r,n,a,s;if("object"!=typeof e||null===e||"[object Array]"===T.call(e))throw new TypeError($("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof i||null===i||"[object Array]"===T.call(i))throw new TypeError($("invalid argument. Property descriptor must be an object. Value: `%s`.",i));if((n="value"in i)&&(D.call(e,t)||P.call(e,t)?(r=e.__proto__,e.__proto__=N,delete e[t],e[t]=i.value,e.__proto__=r):e[t]=i.value),a="get"in i,s="set"in i,n&&(a||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return a&&O&&O.call(e,t,i.get),s&&j&&j.call(e,t,i.set),e};var Q=A;function G(e,t,i){Q(e,t,{configurable:!1,enumerable:!1,writable:!1,value:i})}var Z="function"==typeof Object.defineProperty?Object.defineProperty:null;var U=Object.defineProperty;function B(e){return"number"==typeof e}function X(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function z(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+X(n):X(n)+e,r&&(e="-"+e)),e}var M=String.prototype.toLowerCase,H=String.prototype.toUpperCase;function J(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!B(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=z(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=z(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===H.call(e.specifier)?H.call(i):M.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function K(e){return"string"==typeof e}var Y=Math.abs,ee=String.prototype.toLowerCase,te=String.prototype.toUpperCase,ie=String.prototype.replace,re=/e\+(\d)$/,ne=/e-(\d)$/,ae=/^(\d+)$/,se=/^(\d+)e/,oe=/\.0$/,ce=/\.0*e/,pe=/(\..*[^0])0*e/;function ue(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!B(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":Y(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=ie.call(i,pe,"$1e"),i=ie.call(i,ce,"e"),i=ie.call(i,oe,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=ie.call(i,re,"e+0$1"),i=ie.call(i,ne,"e-0$1"),e.alternate&&(i=ie.call(i,ae,"$1."),i=ie.call(i,se,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===te.call(e.specifier)?te.call(i):ee.call(i)}function _e(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function he(e,t,i){var r=t-e.length;return r<0?e:e=i?e+_e(r):_e(r)+e}var le=String.fromCharCode,de=isNaN,fe=Array.isArray;function ge(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function we(e){var t,i,r,n,a,s,o,c,p;if(!fe(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(K(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=ge(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,de(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,de(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=J(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!de(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=de(a)?String(r.arg):le(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=ue(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=z(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=he(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var ve=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function me(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function be(e){var t,i,r,n;for(i=[],n=0,r=ve.exec(e);r;)(t=e.slice(n,ve.lastIndex-r[0].length)).length&&i.push(t),i.push(me(r)),n=ve.lastIndex,r=ve.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function ke(e){return"string"==typeof e}function ye(e){var t,i;if(!ke(e))throw new TypeError(ye("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[be(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return we.apply(null,t)}var xe,Se=Object.prototype,Ee=Se.toString,Ie=Se.__defineGetter__,qe=Se.__defineSetter__,Le=Se.__lookupGetter__,Ce=Se.__lookupSetter__;xe=function(){try{return Z({},"x",{}),!0}catch(e){return!1}}()?U:function(e,t,i){var r,n,a,s;if("object"!=typeof e||null===e||"[object Array]"===Ee.call(e))throw new TypeError(ye("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof i||null===i||"[object Array]"===Ee.call(i))throw new TypeError(ye("invalid argument. Property descriptor must be an object. Value: `%s`.",i));if((n="value"in i)&&(Le.call(e,t)||Ce.call(e,t)?(r=e.__proto__,e.__proto__=Se,delete e[t],e[t]=i.value,e.__proto__=r):e[t]=i.value),a="get"in i,s="set"in i,n&&(a||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return a&&Ie&&Ie.call(e,t,i.get),s&&qe&&qe.call(e,t,i.set),e};var Re=xe;var Ve=Boolean;function Fe(e){return"number"==typeof e}function We(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function $e(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+We(n):We(n)+e,r&&(e="-"+e)),e}var Ae=String.prototype.toLowerCase,Ne=String.prototype.toUpperCase;function Te(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!Fe(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=$e(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=$e(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===Ne.call(e.specifier)?Ne.call(i):Ae.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function Oe(e){return"string"==typeof e}var je=Math.abs,De=String.prototype.toLowerCase,Pe=String.prototype.toUpperCase,Qe=String.prototype.replace,Ge=/e\+(\d)$/,Ze=/e-(\d)$/,Ue=/^(\d+)$/,Be=/^(\d+)e/,Xe=/\.0$/,ze=/\.0*e/,Me=/(\..*[^0])0*e/;function He(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!Fe(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":je(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=Qe.call(i,Me,"$1e"),i=Qe.call(i,ze,"e"),i=Qe.call(i,Xe,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=Qe.call(i,Ge,"e+0$1"),i=Qe.call(i,Ze,"e-0$1"),e.alternate&&(i=Qe.call(i,Ue,"$1."),i=Qe.call(i,Be,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===Pe.call(e.specifier)?Pe.call(i):De.call(i)}function Je(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function Ke(e,t,i){var r=t-e.length;return r<0?e:e=i?e+Je(r):Je(r)+e}var Ye=String.fromCharCode,et=isNaN,tt=Array.isArray;function it(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function rt(e){var t,i,r,n,a,s,o,c,p;if(!tt(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(Oe(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=it(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,et(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,et(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=Te(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!et(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=et(a)?String(r.arg):Ye(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=He(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=$e(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=Ke(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var nt=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function at(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function st(e){var t,i,r,n;for(i=[],n=0,r=nt.exec(e);r;)(t=e.slice(n,nt.lastIndex-r[0].length)).length&&i.push(t),i.push(at(r)),n=nt.lastIndex,r=nt.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function ot(e){return"string"==typeof e}function ct(e){var t,i,r;if(!ot(e))throw new TypeError(ct("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=st(e),(i=new Array(arguments.length))[0]=t,r=1;r<i.length;r++)i[r]=arguments[r];return rt.apply(null,i)}function pt(e){return"string"==typeof e}var ut="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function _t(){return ut&&"symbol"==typeof Symbol.toStringTag}var ht=Object.prototype.toString;var lt=Object.prototype.hasOwnProperty;var dt="function"==typeof Symbol?Symbol:void 0,ft="function"==typeof dt?dt.toStringTag:"";var gt=_t()?function(e){var t,i,r,n,a;if(null==e)return ht.call(e);i=e[ft],a=ft,t=null!=(n=e)&&lt.call(n,a);try{e[ft]=void 0}catch(t){return ht.call(e)}return r=ht.call(e),t?e[ft]=i:delete e[ft],r}:function(e){return ht.call(e)},wt=String.prototype.valueOf;var vt=_t();function mt(e){return"object"==typeof e&&(e instanceof String||(vt?function(e){try{return wt.call(e),!0}catch(e){return!1}}(e):"[object String]"===gt(e)))}function bt(e){return pt(e)||mt(e)}function kt(e){return"number"==typeof e}function yt(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function xt(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+yt(n):yt(n)+e,r&&(e="-"+e)),e}G(bt,"isPrimitive",pt),G(bt,"isObject",mt);var St=String.prototype.toLowerCase,Et=String.prototype.toUpperCase;function It(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!kt(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=xt(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=xt(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===Et.call(e.specifier)?Et.call(i):St.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function qt(e){return"string"==typeof e}var Lt=Math.abs,Ct=String.prototype.toLowerCase,Rt=String.prototype.toUpperCase,Vt=String.prototype.replace,Ft=/e\+(\d)$/,Wt=/e-(\d)$/,$t=/^(\d+)$/,At=/^(\d+)e/,Nt=/\.0$/,Tt=/\.0*e/,Ot=/(\..*[^0])0*e/;function jt(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!kt(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":Lt(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=Vt.call(i,Ot,"$1e"),i=Vt.call(i,Tt,"e"),i=Vt.call(i,Nt,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=Vt.call(i,Ft,"e+0$1"),i=Vt.call(i,Wt,"e-0$1"),e.alternate&&(i=Vt.call(i,$t,"$1."),i=Vt.call(i,At,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===Rt.call(e.specifier)?Rt.call(i):Ct.call(i)}function Dt(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function Pt(e,t,i){var r=t-e.length;return r<0?e:e=i?e+Dt(r):Dt(r)+e}var Qt=String.fromCharCode,Gt=isNaN,Zt=Array.isArray;function Ut(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function Bt(e){var t,i,r,n,a,s,o,c,p;if(!Zt(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(qt(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=Ut(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,Gt(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,Gt(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=It(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!Gt(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=Gt(a)?String(r.arg):Qt(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=jt(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=xt(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=Pt(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var Xt=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function zt(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function Mt(e){var t,i,r,n;for(i=[],n=0,r=Xt.exec(e);r;)(t=e.slice(n,Xt.lastIndex-r[0].length)).length&&i.push(t),i.push(zt(r)),n=Xt.lastIndex,r=Xt.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function Ht(e){return"string"==typeof e}function Jt(e){var t,i;if(!Ht(e))throw new TypeError(Jt("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[Mt(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return Bt.apply(null,t)}var Kt=/[-\/\\^$*+?.()|[\]{}]/g;function Yt(e){var t,i;if(!pt(e))throw new TypeError(Jt("invalid argument. Must provide a regular expression string. Value: `%s`.",e));if("/"===e[0])for(i=e.length-1;i>=0&&"/"!==e[i];i--);return void 0===i||i<=0?e.replace(Kt,"\\$&"):(t=(t=e.substring(1,i)).replace(Kt,"\\$&"),e=e[0]+t+e.substring(i))}function ei(e,t,i){return e.replace(t,i)}function ti(){}function ii(e){throw e}function ri(){return{comment:"",delimiter:",",doublequote:!0,escape:"",ltrim:!1,maxRows:1e308,newline:"\r\n",onClose:ti,onColumn:ti,onComment:null,onError:ii,onRow:ti,onSkip:null,onWarn:null,quote:'"',quoting:!0,rowBuffer:[],rtrim:!1,skip:"",skipBlankRows:!1,skipRow:null,strict:!0,trimComment:!0,whitespace:[" "]}}var ni=["closed","comment","escape","error","field","init","invalid_quote_end","quote_end","quoted_escape","quoted_field","skip","skipped_comment","skipped_escape","skipped_field","skipped_invalid_quote_end","skipped_quote_end","skipped_quoted_escape","skipped_quoted_field"];var ai=function(){var e,t;for(e={},t=0;t<ni.length;t++)e[ni[t]]=t;return e}(),si=ai.closed;var oi=t("state:comment"),ci=ai.init;var pi=ai.error;function ui(e,t){return e<t?t:e}var _i=t("state:escape"),hi=ai.error,li=ai.field;var di=t("state:field"),fi=ai.escape,gi=ai.field,wi=ai.init,vi=ai.quoted_field;var mi=t("state:init"),bi=ai.comment,ki=ai.field,yi=ai.escape,xi=ai.init,Si=ai.quoted_field,Ei=ai.skip;var Ii=t("state:invalid_quote_end"),qi=ai.error,Li=ai.field,Ci=ai.init;function Ri(e,t){e._isWhitespace(e._qidx+1,e._cursor)?e._raiseWarning("INVALID_CLOSING_QUOTE")._rewind(e._cursor-e._qidx)._changeState(t):(Ii("Error."),e._setErrorState("INVALID_CLOSING_QUOTE")._changeState(qi))}var Vi=t("state:quote_end"),Fi=ai.error,Wi=ai.field,$i=ai.init,Ai=ai.invalid_quote_end,Ni=ai.quoted_field;var Ti=t("state:quoted_escape"),Oi=ai.error,ji=ai.quoted_field;var Di=t("state:quoted_field"),Pi=ai.quote_end,Qi=ai.quoted_escape;var Gi=t("state:skip"),Zi=ai.init,Ui=ai.skip,Bi=ai.skipped_comment,Xi=ai.skipped_field,zi=ai.skipped_escape,Mi=ai.skipped_quoted_field;var Hi=t("state:skipped_comment"),Ji=ai.init;var Ki=t("state:skipped_escape"),Yi=ai.skipped_field;var er=t("state:skipped_field"),tr=ai.init,ir=ai.skipped_escape,rr=ai.skipped_field,nr=ai.skipped_quoted_field;var ar=t("state:skipped_invalid_quote_end"),sr=ai.skipped_field,or=ai.init;var cr=t("state:skipped_quote_end"),pr=ai.init,ur=ai.skipped_field,_r=ai.skipped_invalid_quote_end,hr=ai.skipped_quoted_field;var lr=t("state:skipped_quoted_escape"),dr=ai.skipped_quoted_field;var fr=t("state:skipped_quoted_field"),gr=ai.skipped_quote_end,wr=ai.skipped_quoted_escape;var vr={closed:function(e){return function(){e._changeState(si)}},comment:function(e){var t,i;return t=e._newlineLastIndex,i=e._newline,function(r){if(oi("Char: %s",r),r===i[t]&&e._scan(i,t))return oi("Newline."),void e._rewind(t)._changeState(ci);e._push(r)}},escape:function(e){var t,i,r,n,a,s,o,c,p,u,_,h,l;return t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,r=e._commentLastIndex,p=e._comment,a=e._skipLastIndex,h=e._skip,n=e._escapeLastIndex,s=e._escapeLength,u=e._escape,_=e._strict,l=ui(ui(t,i),n),function(d){var f=e._cursor,g=e._eidx,w=f-g;if(_i("Char: %s",d),w===t&&d===o[t]&&e._scan(o,t))return _i("Delimiter."),void e._copyWithin(g-n,g+1,t)._rewind(s)._push(d)._changeState(li);if(w===i&&d===c[i]&&e._scan(c,i))return _i("Newline."),void e._copyWithin(g-n,g+1,i)._rewind(s)._push(d)._changeState(li);if(w===n&&d===u[n]&&e._scan(u,n))return _i("Escape."),void e._copyWithin(g-n,g+1,n)._rewind(s)._push(d)._changeState(li);if(p&&f-r==0&&d===p[r]&&e._scan(p,r))return _i("Comment."),void e._copyWithin(g-r,g+1,r)._rewind(s)._push(d)._changeState(li);if(h&&f-a==0&&d===h[a]&&e._scan(h,a))return _i("Skip."),void e._copyWithin(g-a,g+1,a)._rewind(s)._push(d)._changeState(li);if(w>=l)return _?(_i("Error."),void e._setErrorState("INVALID_ESCAPE")._changeState(hi)):(_i("Escape sequence is not followed by a special character sequence."),void e._raiseWarning("INVALID_ESCAPE")._push(d)._changeState(li));e._push(d)}},error:function(e){return function(){e._changeState(pi)}},field:function(e){var t,i,r,n,a,s,o,c,p,u;return r=e._escapeLastIndex,c=e._escape,n=e._quoteLastIndex,u=e._quote,t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,o=e._quoting,p=e._strict,function(_){var h=e._cursor-e._cidx+1;if(di("Char: %s",_),_===c[r]&&e._scan(c,r))return di("Escape."),void e._push(_)._changeState(fi);if(h-n==0&&_===u[n]&&e._scan(u,n))return o?(di("Quote."),void e._rewind(n)._changeState(vi)):void e._push(_);if(!1===p&&_===u[n]&&e._scan(u,n))return o&&e._isWhitespace(e._cidx,e._cursor-n)?(di("Quote."),void e._raiseWarning("INVALID_OPENING_QUOTE")._rewind(h)._changeState(vi)):void e._push(_);if(_===a[t]&&e._scan(a,t))return di("Delimiter."),void e._rewind(t)._changeState(gi);if(_===s[i]&&e._scan(s,i))return di("Newline."),void e._rewind(i)._changeState(wi);e._push(_)}},init:function(e){var t,i,r,n,a,s,o,c,p,u,_,h,l,d;return r=e._commentLastIndex,p=e._comment,s=e._skipLastIndex,d=e._skip,n=e._escapeLastIndex,_=e._escape,a=e._quoteLastIndex,l=e._quote,t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,u=e._quoting,h=e._strict,function(f){var g=e._cursor+1;if(mi("Char: %s",f),p&&g-r==0&&f===p[r]&&e._scan(p,r))return mi("Comment."),void e._rewind(r)._changeState(bi);if(d&&g-s==0&&f===d[s]&&e._scan(d,s))return mi("Skip."),void e._rewind(s)._changeState(Ei);if(f===_[n]&&e._scan(_,n))return mi("Escape."),void e._push(f)._changeState(yi);if(g-a==0&&f===l[a]&&e._scan(l,a))return u?(mi("Quote."),void e._rewind(a)._changeState(Si)):void e._push(f);if(!1===h&&f===l[a]&&e._scan(l,a))return u&&e._isWhitespace(0,e._cursor-a)?(mi("Quote."),void e._raiseWarning("INVALID_OPENING_QUOTE")._rewind(g)._changeState(Si)):void e._push(f);if(f===o[t]&&e._scan(o,t))return mi("Delimiter."),void e._rewind(t)._changeState(ki);if(f===c[i]&&e._scan(c,i))return mi("Newline."),void e._rewind(i)._changeState(xi);e._push(f)}},invalid_quote_end:function(e){var t,i,r,n;return t=e._delimiterLastIndex,r=e._delimiter,i=e._newlineLastIndex,n=e._newline,function(a){if(Ii("Char: %s",a),a===r[t]&&e._scan(r,t))return Ii("Delimiter."),e._rewind(t),void Ri(e,Li);if(a===n[i]&&e._scan(n,i))return Ii("Newline."),e._rewind(i),void Ri(e,Ci);e._push(a)}},quote_end:function(e){var t,i,r,n,a,s,o,c,p;return t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,r=e._quoteLastIndex,c=e._quote,n=e._doublequote,o=e._strict,p=ui(ui(t,i),r),function(u){if(Vi("Char: %s",u),n&&u===c[r]&&e._scan(c,r))return Vi("Double quote."),void e._push(u)._changeState(Ni);if(u===a[t]&&e._scan(a,t))return Vi("Delimiter."),void e._rewind(t)._changeState(Wi);if(u===s[i]&&e._scan(s,i))return Vi("Newline."),void e._rewind(i)._changeState($i);if(e._cursor-e._qidx>=p)return o?(Vi("Error."),void e._setErrorState("INVALID_CLOSING_QUOTE")._changeState(Fi)):(Vi("Invalid closing quote."),void e._push(u)._changeState(Ai));e._push(u)}},quoted_escape:function(e){var t,i,r,n,a;return i=e._quoteLastIndex,a=e._quote,t=e._escapeLastIndex,r=e._escapeLength,n=e._strict,function(s){var o=e._cursor,c=e._eidx,p=o-c;if(Ti("Char: %s",s),p===i&&s===a[i]&&e._scan(a,i))return Ti("Quote."),void e._copyWithin(c-t,c+1,i)._rewind(r)._push(s)._changeState(ji);if(p>=i)return n?(Ti("Error."),void e._setErrorState("INVALID_QUOTED_ESCAPE")._changeState(Oi)):(Ti("Escape sequence is not followed by a quote sequence."),void e._raiseWarning("INVALID_QUOTED_ESCAPE")._push(s)._changeState(ji));e._push(s)}},quoted_field:function(e){var t,i,r,n,a;return t=e._escapeLastIndex,n=e._escape,i=e._quoteLastIndex,a=e._quote,r=e._doublequote,function(s){if(Di("Char: %s",s),!1===r&&s===n[t]&&e._scan(n,t))return Di("Escape."),void e._push(s)._changeState(Qi);if(s===a[i]&&e._scan(a,i))return Di("Quote."),void e._rewind(i)._changeState(Pi);e._push(s)}},skip:function(e){var t,i,r,n,a,s,o,c,p,u,_,h,l,d;return r=e._commentLastIndex,p=e._comment,s=e._skipLastIndex,d=e._skip,n=e._escapeLastIndex,_=e._escape,a=e._quoteLastIndex,l=e._quote,t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,u=e._quoting,h=e._strict,function(f){var g=e._cursor+1;if(Gi("Char: %s",f),p&&g-r==0&&f===p[r]&&e._scan(p,r))return Gi("Comment."),void e._push(f)._changeState(Bi);if(d&&g-s==0&&f===d[s]&&e._scan(d,s))return Gi("Skip."),void e._push(f)._changeState(Ui);if(f===_[n]&&e._scan(_,n))return Gi("Escape."),void e._push(f)._changeState(zi);if(g-a==0&&f===l[a]&&e._scan(l,a))return u?(Gi("Quote."),void e._push(f)._changeState(Mi)):void e._push(f);if(!1===h&&f===l[a]&&e._scan(l,a))return u&&e._isWhitespace(0,e._cursor-a)?(Gi("Quote."),void e._push(f)._changeState(Mi)):void e._push(f);if(f===o[t]&&e._scan(o,t))return Gi("Delimiter."),void e._push(f)._changeState(Xi);if(f===c[i]&&e._scan(c,i))return Gi("Newline."),void e._rewind(i)._changeState(Zi);e._push(f)}},skipped_comment:function(e){var t,i;return t=e._newlineLastIndex,i=e._newline,function(r){if(Hi("Char: %s",r),r===i[t]&&e._scan(i,t))return Hi("Newline."),void e._rewind(t)._changeState(Ji);e._push(r)}},skipped_escape:function(e){var t,i,r,n,a,s,o,c,p,u,_;return t=e._delimiterLastIndex,s=e._delimiter,i=e._newlineLastIndex,o=e._newline,r=e._commentLastIndex,c=e._comment,a=e._skipLastIndex,u=e._skip,n=e._escapeLastIndex,p=e._escape,_=ui(ui(t,i),n),function(h){var l=e._cursor,d=e._eidx,f=l-d;if(Ki("Char: %s",h),f===t&&h===s[t]&&e._scan(s,t))return Ki("Delimiter."),void e._push(h)._changeState(Yi);if(f===i&&h===o[i]&&e._scan(o,i))return Ki("Newline."),void e._push(h)._changeState(Yi);if(f===n&&h===p[n]&&e._scan(p,n))return Ki("Escape."),void e._push(h)._changeState(Yi);if(c&&l-r==0&&h===c[r]&&e._scan(c,r))return Ki("Comment."),void e._push(h)._changeState(Yi);if(u&&l-a==0&&h===u[a]&&e._scan(u,a))return Ki("Skip."),void e._push(h)._changeState(Yi);if(f>=_)return Ki("Normal character sequence."),void e._push(h)._changeState(Yi);e._push(h)}},skipped_field:function(e){var t,i,r,n,a,s,o,c,p,u;return r=e._escapeLastIndex,c=e._escape,n=e._quoteLastIndex,u=e._quote,t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,o=e._quoting,p=e._strict,function(_){var h=e._cursor-e._cidx+1;if(er("Char: %s",_),_===c[r]&&e._scan(c,r))return er("Escape."),void e._push(_)._changeState(ir);if(h-n==0&&_===u[n]&&e._scan(u,n))return e._push(_),o?(er("Quote."),void e._changeState(nr)):void 0;if(!1===p&&_===u[n]&&e._scan(u,n))return e._push(_),o&&e._isWhitespace(e._cidx,e._cursor-n)?(er("Quote."),void e._changeState(nr)):void 0;if(_===a[t]&&e._scan(a,t))return er("Delimiter."),void e._push(_)._changeState(rr);if(_===s[i]&&e._scan(s,i))return er("Newline."),void e._rewind(i)._changeState(tr);e._push(_)}},skipped_invalid_quote_end:function(e){var t,i,r,n;return t=e._delimiterLastIndex,r=e._delimiter,i=e._newlineLastIndex,n=e._newline,function(a){if(ar("Char: %s",a),a===r[t]&&e._scan(r,t))return ar("Delimiter."),void e._push(a)._changeState(sr);if(a===n[i]&&e._scan(n,i))return ar("Newline."),void e._rewind(i)._changeState(or);e._push(a)}},skipped_quote_end:function(e){var t,i,r,n,a,s,o,c;return t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,r=e._quoteLastIndex,o=e._quote,n=e._doublequote,c=ui(ui(t,i),r),function(p){if(cr("Char: %s",p),n&&p===o[r]&&e._scan(o,r))return cr("Double quote."),void e._push(p)._changeState(hr);if(p===a[t]&&e._scan(a,t))return cr("Delimiter."),void e._push(p)._changeState(ur);if(p===s[i]&&e._scan(s,i))return cr("Newline."),void e._rewind(i)._changeState(pr);if(e._cursor-e._qidx>=c)return cr("Invalid closing quote."),void e._push(p)._changeState(_r);e._push(p)}},skipped_quoted_escape:function(e){var t,i;return t=e._quoteLastIndex,i=e._quote,function(r){var n=e._cursor,a=e._eidx,s=n-a;if(lr("Char: %s",r),s===t&&r===i[t]&&e._scan(i,t))return lr("Quote."),void e._push(r)._changeState(dr);if(s>=t)return lr("Escape sequence is not followed by a quote sequence."),void e._push(r)._changeState(dr);e._push(r)}},skipped_quoted_field:function(e){var t,i,r,n,a;return t=e._escapeLastIndex,n=e._escape,i=e._quoteLastIndex,a=e._quote,r=e._doublequote,function(s){if(fr("Char: %s",s),!1===r&&s===n[t]&&e._scan(n,t))return fr("Escape."),void e._push(s)._changeState(wr);if(s===a[i]&&e._scan(a,i))return fr("Quote."),void e._push(s)._changeState(gr);e._push(s)}}};function mr(e){var t,i;for(t=[],i=0;i<ni.length;i++)t.push(vr[ni[i]](e));return t}var br,kr=t("parser"),yr=ai.closed,xr=ai.comment,Sr=ai.error,Er=ai.escape,Ir=ai.field,qr=ai.init,Lr=ai.invalid_quote_end,Cr=ai.quote_end,Rr=ai.quoted_escape,Vr=ai.quoted_field,Fr=ai.skip;function Wr(e){var t,i;for(t="(?:",i=0;i<e.length-1;i++)t+=Yt(e[i])+"|";return t+Yt(e[i])+")"}function $r(e){var t;return this instanceof $r?(e=e||{},t=ri(),this._buffer=[],this._cursor=-1,this._cidx=0,this._qidx=-1,this._eidx=-1,this._rowBufferFLG=Ve(e.rowBuffer),this._rowBuffer=e.rowBuffer||t.rowBuffer,this._col=0,this._row=0,this._line=0,this._commented=!1,this._skipped=!1,this._errname="",this._comment=e.comment||t.comment,this._delimiter=e.delimiter||t.delimiter,this._doublequote=void 0===e.doublequote?t.doublequote:e.doublequote,this._escape=e.escape||t.escape,this._ltrim=void 0===e.ltrim?t.ltrim:e.ltrim,this._maxRows=void 0===e.maxRows?t.maxRows:e.maxRows,this._newline=e.newline||t.newline,this._quote=e.quote||t.quote,this._quoting=void 0===e.quoting?t.quoting:e.quoting,this._rtrim=void 0===e.rtrim?t.rtrim:e.rtrim,this._skip=e.skip||t.skip,this._skipBlankRows=void 0===e.skipBlankRows?t.skipBlankRows:e.skipBlankRows,this._skipRow=e.skipRow||t.skipRow,this._strict=void 0===e.strict?t.strict:e.strict,this._trimComment=void 0===e.trimComment?t.trimComment:e.trimComment,this._whitespace=Wr(e.whitespace||t.whitespace),this._reWhitespace=new RegExp("^"+this._whitespace+"*([\\S\\s]*?)"+this._whitespace+"*$"),this._reWhitespaceLeft=new RegExp("^"+this._whitespace+"*"),this._reWhitespaceRight=new RegExp(this._whitespace+"*$"),this._onClose=e.onClose||t.onClose,this._onColumn=e.onColumn||t.onColumn,this._onComment=e.onComment||t.onComment,this._onRow=e.onRow||t.onRow,this._onSkip=e.onSkip||t.onSkip,this._onError=e.onError||t.onError,this._onWarn=e.onWarn||t.onWarn,this._commentLength=this._comment.length,this._commentLastIndex=this._commentLength-1,this._delimiterLength=this._delimiter.length,this._delimiterLastIndex=this._delimiterLength-1,this._escapeLength=this._escape.length,this._escapeLastIndex=this._escapeLength-1,this._newlineLength=this._newline.length,this._newlineLastIndex=this._newlineLength-1,this._quoteLength=this._quote.length,this._quoteLastIndex=this._quoteLength-1,this._skipLength=this._skip.length,this._skipLastIndex=this._skipLength-1,this._skipRow&&this._skipRow(0,0)?(this._state=Fr,this._skipped=!0):this._state=qr,this._states=mr(this),this):arguments.length?new $r(e):new $r}ai.skipped_comment,ai.skipped_escape,ai.skipped_field,ai.skipped_invalid_quote_end,ai.skipped_quote_end,ai.skipped_quoted_escape,ai.skipped_quoted_field,G($r.prototype,"_push",(function(e){var t=this._buffer;return this._cursor+=1,this._cursor>=t.length?(t.push(e),kr("Internal buffer size increased. Length: %d.",t.length)):t[this._cursor]=e,kr("Cursor: %d. Push: %s",this._cursor,e),this})),G($r.prototype,"_rewind",(function(e){return this._cursor-=e,kr("Rewind: %d. Cursor: %d.",e,this._cursor),this})),G($r.prototype,"_copyWithin",(function(e,t,i){var r,n;for(r=this._buffer,n=0;n<i;n++)r[e+n]=r[t+n];return this})),G($r.prototype,"_slice",(function(e,t){return this._buffer.slice(e,t+1).join("")})),G($r.prototype,"_isWhitespace",(function(e,t){return""===ei(this._slice(e,t),this._reWhitespaceLeft,"")})),G($r.prototype,"_reset",(function(){return this._col=0,this._cidx=0,this._qidx=-1,this._eidx=-1,this._skipRow&&this._skipRow(this._row,this._line)?(this._state=Fr,this._skipped=!0):(this._state=qr,this._skipped=!1),this._commented=!1,this._cursor=-1,kr("Parser reset."),this})),G($r.prototype,"_setField",(function(e,t){var i=this._rowBuffer;return t>=i.length?(i.push(e),kr("Row buffer size increased. Length: %d.",i.length)):i[t]=e,this})),G($r.prototype,"_getField",(function(e,t){var i=this._slice(e,t);return this._ltrim?this._rtrim?ei(i,this._reWhitespace,"$1"):ei(i,this._reWhitespaceLeft,""):this._rtrim?ei(i,this._reWhitespaceRight,""):i})),G($r.prototype,"_getRow",(function(){return this._rowBufferFLG?this._rowBuffer:this._rowBuffer.slice(0,this._col)})),G($r.prototype,"_scan",(function(e,t){var i,r,n;for(i=this._buffer,r=this._cursor-t+1,n=0;n<t&&i[r+n]===e[n];n++);return n===t})),G($r.prototype,"_onField",(function(){var e=this._getField(this._cidx,this._cursor);return this._setField(e,this._col),this._onColumn(e,this._row,this._col,this._line),kr("Field. Line: %d. Row: %d. Column: %d. Value: %s",this._line,this._row,this._col,e),this._col+=1,this._cidx=this._cursor+1,this._qidx=-1,this._eidx=-1,this})),G($r.prototype,"_onRecord",(function(){var e;return e=this._getField(this._cidx,this._cursor),!this._skipBlankRows||0!==this._col||""!==e&&""!==ei(e,this._reWhitespaceLeft,"")?(this._setField(e,this._col),this._onColumn(e,this._row,this._col,this._line),this._col+=1,this._onRow(this._getRow(),this._row,this._col,this._line),kr("Record. Line: %d. Fields: %d.",this._line,this._col),this._row+=1,this._line+=1,this._reset(),this._row>=this._maxRows&&this._changeState(yr),this):this._onSkippedRow()})),G($r.prototype,"_onCommentedRow",(function(){var e;return this._onComment?(e=this._slice(0,this._cursor),this._trimComment&&(e=ei(e,this._reWhitespaceLeft,"")),this._onComment(e,this._line),kr("Comment. Line: %d. Value: %s",this._line,e)):kr("Comment. Line: %d.",this._line),this._line+=1,this._reset(),this})),G($r.prototype,"_onSkippedRow",(function(){var e;return this._onSkip?(e=this._slice(0,this._cursor),this._onSkip(e,this._line),kr("Skipped row. Line: %d. Value: %s",this._line,e)):kr("Skipped row. Line: %d.",this._line),this._line+=1,this._reset(),this})),G($r.prototype,"_onClosingQuote",(function(){return this._qidx=this._cursor,this})),G($r.prototype,"_onEscape",(function(){return this._eidx=this._cursor,this})),G($r.prototype,"_createException",(function(e){var t;switch(e){case"INVALID_CLOSING_QUOTE":t=new Error(ct("unexpected error. Encountered an invalid record. Field %d on line %d contains a closing quote which is not immediately followed by a delimiter or newline.",this._col,this._line));break;case"INVALID_OPENING_QUOTE":t=new Error(ct("unexpected error. Encountered an invalid record. Field %d on line %d contains an opening quote which does not immediately follow a delimiter or newline.",this._col,this._line));break;case"INVALID_ESCAPE":t=new Error(ct("unexpected error. Encountered an invalid record. Field %d on line %d contains an escape sequence which is not immediately followed by a special character sequence.",this._col,this._line));break;case"INVALID_QUOTED_ESCAPE":t=new Error(ct("unexpected error. Encountered an invalid record. Field %d on line %d contains an escape sequence within a quoted field which is not immediately followed by a quote sequence.",this._col,this._line));break;case"CLOSED":t=new Error("invalid operation. Parser is unable to parse new chunks, as the parser has been closed. To parse new chunks, create a new parser instance.");break;default:t=new Error("invalid operation. Parser is in an unrecoverable error state. To parse new chunks, create a new parser instance.")}return t})),G($r.prototype,"_raiseWarning",(function(e){var t;return this._onWarn&&(t=this._createException(e),kr("Warning: %s",t.message),this._onWarn(t)),this})),G($r.prototype,"_raiseException",(function(){var e=this._createException(this._errname);return kr("Error: %s",e.message),this._onError(e),this})),G($r.prototype,"_changeState",(function(e){switch(kr("State transition: %s -> %s.",ni[this._state],ni[e]),e){case yr:this._close();break;case xr:this._commented=!0;break;case Sr:this._raiseException();break;case Er:this._onEscape();break;case Ir:this._state!==Er&&this._onField();break;case qr:this._commented?this._onCommentedRow():this._skipped?this._onSkippedRow():this._onRecord();break;case Lr:break;case Cr:this._onClosingQuote();break;case Rr:this._onEscape();break;case Vr:break;case Fr:this._skipped=!0}return this._state=e,this})),G($r.prototype,"_setErrorState",(function(e){return e?kr("Error: %s.",e):kr("Reset error state."),this._errname=e,this})),G($r.prototype,"_close",(function(){var e,t;return this.done?(this._setErrorState(yr)._changeState(Sr),this):(this._cursor>=0?(e=this._state)===qr||e===Ir||e===Cr?this._changeState(qr)._onClose():(this._col&&this._onRow(this._getRow(),this._row,this._col),t=this._slice(this._cidx,this._cursor),kr("Flush: %s",t),this._onClose(t)):this._onClose(),kr("Closed."),this)})),G($r.prototype,"next",(function(e){var t,i;if(kr("Chunk: %s",e),this.done)return this._setErrorState(yr)._changeState(Sr),this;for(t=this._states,i=0;i<e.length;i++)if(t[this._state](e[i]),this._state===yr||this._state===Sr)return this;return this})),G($r.prototype,"close",(function(){return this.done||this._changeState(yr),this})),br=$r.prototype,Re(br,"done",{configurable:!1,enumerable:!1,get:function(){return this._state===yr||this._state===Sr}});export{$r as default};
//# sourceMappingURL=mod.js.map
